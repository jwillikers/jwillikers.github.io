<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Generate an SSH Key | JWillikers</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Generate an SSH Key" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Handy admin and dev guides from my myriad of tinkering" />
<meta property="og:description" content="Handy admin and dev guides from my myriad of tinkering" />
<link rel="canonical" href="https://jwillikers.com/generate-an-ssh-key" />
<meta property="og:url" content="https://jwillikers.com/generate-an-ssh-key" />
<meta property="og:site_name" content="JWillikers" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-24T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Generate an SSH Key" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://jwillikers.com/generate-an-ssh-key"},"description":"Handy admin and dev guides from my myriad of tinkering","url":"https://jwillikers.com/generate-an-ssh-key","@type":"BlogPosting","headline":"Generate an SSH Key","dateModified":"2020-10-24T00:00:00+00:00","datePublished":"2020-10-24T00:00:00+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://jwillikers.com/feed.xml" title="JWillikers" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="assets/css/asciidoctor.css"></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">JWillikers</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Generate an SSH Key</h1>
    <p class="post-meta"><time class="dt-published" datetime="2020-10-24T00:00:00+00:00" itemprop="datePublished">
        Oct 24, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Entering passwords is a pain.
I know you agree.
Why not enter passwords less by using <a href="https://www.ssh.com/ssh/">SSH</a>?
You&#8217;ll just need a key and a little know-how to get started.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate_an_ssh_key">Generate an SSH Key</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SSH is ubiquitous.
It&#8217;s used by developers and systems administrators every day all across the globe to securely connect to machines.
Through cryptographic means, it is capable of establishing a secure connection between two hosts across a network.
This guide details how to generate an SSH key and two common use cases, authenticating with GitHub and connecting to a remote host.
This guide uses the <a href="https://www.openssh.com/">OpenSSH</a> client and server implementations.
The client and server are assumed to be running <a href="https://ubuntu.com/">Ubuntu</a>, although most of these instructions are identical on any Unix-like operating system using the OpenSSH implementations.
It is assumed you are familiar with the command-line on Unix-Like systems, <a href="https://git-scm.com/">Git</a>, and <a href="https://github.com/">GitHub</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate a key with the <a href="https://man.openbsd.org/ssh-keygen.1"><code>ssh-keygen</code></a> command.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ ssh-keygen
Generating public/private rsa key pair.</code></pre>
</div>
</div>
</li>
<li>
<p>Typically, you will generate exactly one SSH key for your user account on a particular host, so use the default file.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Enter file in which to save the key (/home/jordan/.ssh/id_rsa):</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This file is the private key.
Two key files are actually generated, which together form what is known as a key pair.
The public key file will be placed in the same directory and use the same name with <code>.pub</code> appended.
In this case, <code>/home/jordan/id_rsa.pub</code> is the corresponding public key file.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Never move your private SSH key across the network or send it to anyone else.
In fact, it&#8217;s generally best to keep this key exactly where it is generated, backing it up to offline media.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Enter a strong passphrase to protect your key.</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Enter passphrase (empty for no passphrase):</code></pre>
</div>
</div>
<div class="paragraph">
<p>This passphrase is used to encrypt your private key file.
Even if someone gains access to the key file, they can&#8217;t use it to authenticate as you so long as they don&#8217;t have the passphrase.</p>
</div>
</div>
</div>
</li>
<li>
<p>To finish the creation process, re-enter your nice, strong passphrase.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>Enter same passphrase again:
Your identification has been saved in /home/jordan/.ssh/id_rsa
Your public key has been saved in /home/jordan/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:UdHmkL8i0EME+VYLGydcmV3B1nTk0unPYTHf4WBvnFo jordan@jwillikers
The key's randomart image is:
+---[RSA 3072]----+
|     X@*+..      |
|    ==X@o=       |
|   + OO+E.       |
|    Xo=*=        |
|   o oo+S.       |
|     . o..       |
|        .        |
|                 |
|                 |
+----[SHA256]-----+</code></pre>
</div>
</div>
</li>
<li>
<p>Now that your key is generated, you&#8217;ll probably want to add its passphrase to your login keyring so that you don&#8217;t have to type it all the darn time.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Ubuntu, macOS, and many other Linux desktops will prompt you to save this key to your keychain when you have to unlock it.
The best way to do this is to just use your key, such as described in the following two sections.
On Ubuntu, check the box to automatically unlock the key when you login.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="Save%20the%20Password%20for%20Your%20SSH%20Key%20on%20Ubuntu.png" alt="Save the Password for Your SSH Key on Ubuntu">
</div>
<div class="title">Save the Password for Your SSH Key on Ubuntu</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For integration with the system keychain to work, make sure to use the system&#8217;s SSH client in order to trigger this mechanism.
This can be an issue if you have other versions of OpenSSH on your machine.
I ran into this on macOS when using a newer version of the OpenSSH client provided by <a href="https://www.macports.org/">MacPorts</a>.
The prompt never appeared when using this SSH client.
Establishing an SSH connection by calling <code>/usr/bin/ssh</code> directly successfully triggered the prompt.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These systems take care of running an <a href="https://man.openbsd.org/ssh-agent.1">SSH agent</a> for you.
An SSH agent stores your key unencryped in RAM, so that you don&#8217;t have to enter your passphrase to decrypt it each time you wish to use it.
Not all platforms start the SSH agent and add your key to it for you.
On these platforms, you&#8217;ll have to do this yourself.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="github">GitHub</h3>
<div class="paragraph">
<p>Accessing private repositories or enabling certain privileges on public repositories, such as push access to a repository, will require some form of user authentication.
Working with Git repositories is much easier when SSH handles required authentication.
GitHub is used as an example here because it is so widely used.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Don&#8217;t forget to install Git if you haven&#8217;t already.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ <span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> git</code></pre>
</div>
</div>
</li>
<li>
<p>Open your <a href="https://github.com/settings/keys">SSH and GPG keys</a> settings page in a web browser.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For up-to-date instructions, refer to <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account">GitHub&#8217;s documentation</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select the btn:[New SSH key] button.</p>
</li>
<li>
<p>Optionally, enter a name for this key in the <em>Title</em> field.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The user and host name of the given key will be used by default if this field is left blank.</p>
</div>
</div>
</div>
</li>
<li>
<p>Copy the public key.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>This can be accomplished by dumping the contents of the public key to your terminal and copying the output from there.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ <span class="nb">cat</span> ~/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDoxvFhlQciJxydpZVKnNwVYtSZI8hw6aF3ug961FAHzp1sbuZJm++rFSG30wwxeXK3r+FPXXnEnmPW53dn26ywFChHRRpN4zgyEdCXYLBOILObm/9z6hnOa8MReNC9VKH5xBq5CH4YmNfJjmJ5LaeI9PMbF/++F+n+QDTWgpfwKu3FxJYRtQ4NLd5q2QOvwpzQ3M2FOkqJ0N//qwiuJNLtUmDZQRqpeZCbhhAptrF6yyYME70pMKQFuE5gEzZThDIP6TAPuu0L4LECwossWlsA4bvhOK8wN0KWfvuZLx6r/8ld4P9/3FkshuTsWXIDbykewR4QcPE8EcpVNFH6l+zrLBCkndOimN4iLy7eBPPfdLZG1yfcusA0pPMiYKiA4SYzh6w2wrt0Y0wV1/npNHvZM/qS/2tJTkwYYKLxRah3SdR7onJQzWn67SdzxJ5FO5xQB5HsMMe99JTqaHEGEiUrGFB5MsqUbtTqHo3ZMYre0uEax03omq3pZel+MCj52S8<span class="o">=</span> jordan@jwillikers</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Paste the contents of the public key file in the <em>Key</em> field.</p>
</li>
<li>
<p>Click the btn:[Add SSH key button to upload the key.</p>
</li>
<li>
<p>Clone the desired repository using its SSH URL.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Here, I clone the repository for this blog over SSH.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ git clone git@github.com:jwillikers/blog.git</code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="remote_access">Remote Access</h3>
<div class="paragraph">
<p>For remotely accessing a host, some configuration is required.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the remote machine, make sure to install the OpenSSH server.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ <span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> openssh-server</code></pre>
</div>
</div>
</li>
<li>
<p>Copy the public from your account to the target user&#8217;s <code>~/.ssh/known_hosts</code> file on the remote host.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="https://www.ssh.com/ssh/copy-id"><code>ssh-copy-id</code></a> command is usually available for just this task.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ ssh-copy-id remote_host</code></pre>
</div>
</div>
<div class="paragraph">
<p>If it&#8217;s not available you might be able to install a package for it, such as on <a href="https://www.openbsd.org/">OpenBSD</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ doas pkg_add ssh-copy-id</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or, you can just use <a href="https://man7.org/linux/man-pages/man1/cat.1.html"><code>cat</code></a>, courtesy of <a href="https://mwl.io/">Michael W. Lucas</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ <span class="nb">cat</span> ~/.ssh/id_rsa.pub | <span class="se">\</span>
  ssh remote_host <span class="s2">"cat &gt;&gt; ~/.ssh/authorized_keys"</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Enter your passphrase when prompted.</p>
</li>
<li>
<p>You should now be able to authenticate with your SSH key.</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sh">➜ ssh remote_host</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you are barely capable of generating and using an SSH key, read <a href="https://www.tiltedwindmillpress.com/product/ssh-mastery-2nd-edition/">SSH Mastery</a> by Michael W. Lucas for a much more comprehensive understanding.</p>
</div>
</div>
</div>
  </div><a class="u-url" href="/generate-an-ssh-key" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Handy admin and dev guides from my myriad of tinkering</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jwillikers" title="jwillikers"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://stackoverflow.com/users/9835303" title="9835303"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#stackoverflow"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
