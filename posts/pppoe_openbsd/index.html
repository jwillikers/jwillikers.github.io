<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>PPPoE on OpenBSD - JWillikers</title>
  <meta name="description" content="This brief article describes how I setup the internet connection on my PPPoE interface on OpenBSD 6.6.
   DNS Servers If necessary, configure your system to use your preferred DNS nameservers. The place to do this is resolv.conf. My system uses a couple of nameservers from the list provided by DNSCrypt. The Google nameservers are also quite popular.
 /etc/resolv.conf nameserver 176.103.130.132 (1) nameserver 185.228.168.10 (2)     1 adguard-dns-family   2 cleanbrowsing-adult        A common way of connecting to your ISP&#8217;s network is through DHCP.">
  <meta name="author" content="Jordan Williams"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "JWillikers",
    
    "url": "https:\/\/jwillikers.com\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/jwillikers.com\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/jwillikers.com\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/jwillikers.com\/posts\/pppoe_openbsd\/",
          "name": "P p po e on open b s d"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Jordan Williams"
  },
  "headline": "PPPoE on OpenBSD",
  "description" : "This brief article describes how I setup the internet connection on my PPPoE interface on OpenBSD 6.6.\n   DNS Servers If necessary, configure your system to use your preferred DNS nameservers. The place to do this is resolv.conf. My system uses a couple of nameservers from the list provided by DNSCrypt. The Google nameservers are also quite popular.\n \/etc\/resolv.conf nameserver 176.103.130.132 (1) nameserver 185.228.168.10 (2)     1 adguard-dns-family   2 cleanbrowsing-adult        A common way of connecting to your ISP\x26#8217;s network is through DHCP.",
  "inLanguage" : "en",
  "wordCount":  312 ,
  "datePublished" : "2020-03-10T00:00:00",
  "dateModified" : "2020-03-10T00:00:00",
  "image" : "https:\/\/www.gravatar.com\/avatar\/e3189498d000ca4eb4e893739fd63636?s=500",
  "keywords" : [ "BSD, Internet, Network, OpenBSD, OpenBSD 6, OpenBSD 6.6, PPPoE, Router, Routing, Unix" ],
  "mainEntityOfPage" : "https:\/\/jwillikers.com\/posts\/pppoe_openbsd\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/jwillikers.com\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/www.gravatar.com\/avatar\/e3189498d000ca4eb4e893739fd63636?s=500",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="PPPoE on OpenBSD" />
<meta property="og:description" content="This brief article describes how I setup the internet connection on my PPPoE interface on OpenBSD 6.6.
   DNS Servers If necessary, configure your system to use your preferred DNS nameservers. The place to do this is resolv.conf. My system uses a couple of nameservers from the list provided by DNSCrypt. The Google nameservers are also quite popular.
 /etc/resolv.conf nameserver 176.103.130.132 (1) nameserver 185.228.168.10 (2)     1 adguard-dns-family   2 cleanbrowsing-adult        A common way of connecting to your ISP&#8217;s network is through DHCP.">
<meta property="og:image" content="https://www.gravatar.com/avatar/e3189498d000ca4eb4e893739fd63636?s=500" />
<meta property="og:url" content="https://jwillikers.com/posts/pppoe_openbsd/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="JWillikers" />

  <meta name="twitter:title" content="PPPoE on OpenBSD" />
  <meta name="twitter:description" content="This brief article describes how I setup the internet connection on my PPPoE interface on OpenBSD 6.6.
   DNS Servers If necessary, configure your system to use your preferred DNS nameservers. The â€¦">
  <meta name="twitter:image" content="https://www.gravatar.com/avatar/e3189498d000ca4eb4e893739fd63636?s=500" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.66.0" />
  <link rel="alternate" href="https://jwillikers.com/index.xml" type="application/rss+xml" title="JWillikers"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://jwillikers.com/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://jwillikers.com/css/syntax.css" /><link rel="stylesheet" href="https://jwillikers.com/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://jwillikers.com/">JWillikers</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/posts/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/about/">About</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="JWillikers" href="https://jwillikers.com/">
            <img class="avatar-img" src="https://www.gravatar.com/avatar/e3189498d000ca4eb4e893739fd63636?s=500" alt="JWillikers" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="posts-heading">
              
                <h1>PPPoE on OpenBSD</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This brief article describes how I setup the internet connection on my PPPoE interface on OpenBSD 6.6.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dns_servers">DNS Servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If necessary, configure your system to use your preferred DNS nameservers.
The place to do this is <a href="https://man.openbsd.org/resolv.conf.5">resolv.conf</a>.
My system uses a couple of nameservers from the <a href="https://dnscrypt.info/public-servers">list provided by DNSCrypt</a>.
The <a href="https://developers.google.com/speed/public-dns">Google nameservers</a> are also quite popular.</p>
</div>
<div class="listingblock">
<div class="title">/etc/resolv.conf</div>
<div class="content">
<pre class="rouge highlight"><code>nameserver 176.103.130.132 <i class="conum" data-value="1"></i><b>(1)</b>
nameserver 185.228.168.10 <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>adguard-dns-family</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>cleanbrowsing-adult</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A common way of connecting to your ISP&#8217;s network is through <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol">DHCP</a>.
DHCP is capable of providing your system with DNS nameservers according to <a href="https://tools.ietf.org/html/rfc2132#section-3.8">RFC 2132</a> and <a href="https://tools.ietf.org/html/rfc2937">RFC 2937</a>.
To my knowledge, this capability is absent from the <a href="https://tools.ietf.org/html/rfc2516">PPPoE Specification</a>.
If you are switching from DHCP to PPPoE, be mindful that you may need to set your nameservers if you have not explicitly done so.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pppoe_configuration">PPPoE Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The configuration only involves three configuration files and initializing the new network interface.
I use a <a href="https://man.openbsd.org/OpenBSD-6.6/hostname.if">hostname.if</a> file to initialize the PPPoE interface when the system boots.
This example is very similar to the one provided in the <a href="https://man.openbsd.org/OpenBSD-6.6/pppoe">PPPOE(4)</a> manpage with two differences.
First, <code>chap</code> replaces <code>pap</code> as the authentication protocal.
Second, only the relevant IPv4 options are shown since my ISP doesn&#8217;t support IPv6.</p>
</div>
<div class="listingblock">
<div class="title">/etc/hostname.pppoe0</div>
<div class="content">
<pre class="rouge highlight"><code>inet 0.0.0.0 255.255.255.255 NONE \ <i class="conum" data-value="1"></i><b>(1)</b>
	pppoedev em0 authproto chap \ <i class="conum" data-value="2"></i><b>(2)</b>
	authname 'username' authkey 'password' up
dest 0.0.0.1
!/sbin/route add default -ifp pppoe0 0.0.0.1</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set the IP to <code>0.0.0.0</code>, a wildcard representing whatever IP the PPPoE connection provides.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>em0</code> is the ethernet interface for the router&#8217;s WAN port.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The physical <code>em0</code> interface must be up.</p>
</div>
<div class="listingblock">
<div class="title">/etc/hostname.em0</div>
<div class="content">
<pre class="rouge highlight"><code>up mtu 1508</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start up the <code>em0</code> and <code>pppoe0</code> interfaces.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">sh /etc/netstart em0 pppoe0</span></code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>/etc/netstart</code> script was not able to successfully establish a PPPoE connection when I changed my configuration from <code>pap</code> to <code>chap</code>.
I had to reboot my system after changing the configuration file for the connection to succeed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">reboot</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>


        
          <div class="blog-tags">
            
              <a href="https://jwillikers.com//tags/bsd/">BSD</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/internet/">Internet</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/network/">Network</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/openbsd/">OpenBSD</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/openbsd-6/">OpenBSD 6</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/openbsd-6.6/">OpenBSD 6.6</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/pppoe/">PPPoE</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/router/">Router</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/routing/">Routing</a>&nbsp;
            
              <a href="https://jwillikers.com//tags/unix/">Unix</a>&nbsp;
            
          </div>
        

        

        
      </article>

      
        <ul class="pager blog-pager">
          
          
        </ul>
      


      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="https://github.com/jwillikers" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://gitlab.com/jwillikers" title="GitLab">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-gitlab fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://bitbucket.org/jwillikers" title="Bitbucket">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-bitbucket fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Jordan Williams
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://jwillikers.com/">JWillikers</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.66.0</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          &nbsp;&bull;&nbsp;[<a href="05b4f4c897394bb3f5f8d88ccdd608f72f9b2b3c">05b4f4c8</a>]
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://jwillikers.com/js/main.js"></script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://jwillikers.com/js/load-photoswipe.js"></script>









    
  </body>
</html>

